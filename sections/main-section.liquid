{% if section.settings.video or section.settings.video_mobile %}
  <video
    loop
    muted
    autoplay
    preload="metadata"
    {% if section.settings.video == blank or section.settings.video_mobile == blank %}
      class="{% if section.settings.video != blank %} video-desctop {%else%} video-mobile {% endif %}"
    {% endif %}
    fetchpriority="high"
  >
    {% for item in section.settings.video.sources %}
      <source src="{{ item.url }}" type="{{ item.mime_type }}">
    {% endfor %}

    {% for item in section.settings.video_mobile.sources %}
      <source src="{{ item.url }}" type="{{ item.mime_type }}" media="(max-width: 1024px)">
    {% endfor %}
  </video>
{% endif %}

{% if section.settings.image != blank %}
  <picture
    {% if section.settings.video == blank or section.settings.video_mobile == blank %}
      class="{% if section.settings.video != blank %} img-mobile {%else%} img-desctop {% endif %}"
    {% endif %}
  >
    {% if section.settings.image_mobile != blank %}
      <source media="(max-width: 500px)" srcset="{{ section.settings.image_mobile | image_url: width: 1000 }}">
    {% endif %}
    {{
      section.settings.image
      | image_url: width: 1920
      | image_tag:
        loading: 'eager',
        width: section.settings.image.width,
        height: section.settings.image.height,
        widths: '1100, 1500, 1780, 1920, 2000, 3000, 3840',
        alt: section.settings.image.alt,
        fetchpriority: 'high'
      | escape
    }}
  </picture>
{% endif %}

{% schema %}
{
  "name": "Main section",
  "tag": "section",
  "class": "main img-cover",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "image_picker",
      "id": "image_mobile",
      "label": "Mobile image"
    },
    {
      "type": "video",
      "id": "video",
      "label": "t:sections.video.settings.video.label"
    },
    {
      "type": "video",
      "id": "video_mobile",
      "label": "Mobile video"
    }
  ]
}
{% endschema %}
